(this["webpackJsonpweb-r"]=this["webpackJsonpweb-r"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),a=n(8),s=n.n(a),u=(n(14),n(15),n(5)),i=n(6),l=n(1),c=n(2),d=n(3),v=n(4),h=(n(16),n(17),[1,2,3,4,5,6,7,8,9,void 0]),f=function(e){Object(v.a)(n,e);var t=Object(d.a)(n);function n(e,o){var r;return Object(l.a)(this,n),(r=t.call(this,e,o)).buttonPressTimer=void 0,r}return Object(c.a)(n,[{key:"render",value:function(){var e=this;return o.createElement("div",null,o.createElement("table",null,o.createElement("tr",null,h.map((function(t){return e.renderButton(t)})))))}},{key:"handleButtonPress",value:function(e){var t=this;this.buttonPressTimer=setTimeout((function(){e&&t.props.emitNote(e),t.buttonPressTimer=void 0}),500)}},{key:"handleButtonRelease",value:function(e){this.buttonPressTimer&&(clearTimeout(this.buttonPressTimer),this.buttonPressTimer=void 0,this.props.emitClick(e))}},{key:"renderButton",value:function(e){var t=this;return o.createElement("td",{className:"numpad-cell",onTouchStart:function(){return t.handleButtonPress(e)},onTouchEnd:function(){return t.handleButtonRelease(e)},onMouseDown:function(){return t.handleButtonPress(e)},onMouseUp:function(){return t.handleButtonRelease(e)},onMouseLeave:function(){return t.handleButtonRelease(e)}},e)}}]),n}(o.Component);var p=function(e){Object(v.a)(r,e);var t=Object(d.a)(r);function r(e,o){var a;Object(l.a)(this,r),(a=t.call(this,e,o)).sudokuHelper=void 0;for(var s=[],u=0;u<9;u++){for(var i=[],c=0;c<9;c++)i.push({value:void 0,wrong:!1,editable:!0,notes:[]});s.push(i)}return a.state={cells:s,focus:[-1,-1]},n.e(3).then(n.bind(null,19)).then((function(e){a.sudokuHelper=e,a.generateSudoku()})),a}return Object(c.a)(r,[{key:"generateSudoku",value:function(){if(this.sudokuHelper){var e=function(e){for(var t=[],n=0;n<9;n++){for(var o=[],r=0;r<9;r++){var a=e[9*n+r];o.push({value:"."===a?void 0:parseInt(a),wrong:!1,editable:"."===a,notes:[]})}t.push(o)}return t}(this.sudokuHelper.generate_sudoku());this.setState({cells:e})}}},{key:"focus",value:function(e,t){this.setState(Object(i.a)({},this.state,{focus:[Math.min(Math.max(0,e),8),Math.min(Math.max(0,t),8)]}))}},{key:"setCell",value:function(e,t,n){var o=this.state.cells;o[e][t].editable&&(o[e][t].value=n,this.check(o))}},{key:"setNote",value:function(e,t,n){var o=this.state.cells;if(o[e][t].editable){var r=o[e][t].notes.indexOf(n);-1!=r?o[e][t].notes.splice(r,1):(o[e][t].notes.push(n),o[e][t].notes=o[e][t].notes.sort()),this.setState({cells:o})}}},{key:"deleteNotes",value:function(e,t){var n=this.state.cells;n[e][t].editable&&(n[e][t].notes=[],this.setState({cells:n}))}},{key:"check",value:function(e){for(var t=0;t<9;t++)for(var n=0;n<9;n++)e[t][n].wrong=!1;for(var o=0;o<9;o++){for(var r=[],a=[],s=[],u=0;u<9;u++){var l=3*Math.floor(o/3)+Math.floor(u/3),c=o%3*3+u%3;r.includes(e[o][u].value)&&(e[o][u].wrong=!0),a.includes(e[u][o].value)&&(e[u][o].wrong=!0),s.includes(e[l][c].value)&&(e[l][c].wrong=!0),void 0!==e[o][u].value&&r.push(e[o][u].value),void 0!==e[u][o].value&&a.push(e[u][o].value),void 0!==e[l][c].value&&s.push(e[l][c].value)}r=[],a=[],s=[];for(var d=8;d>=0;d--){var v=3*Math.floor(o/3)+Math.floor(d/3),h=o%3*3+d%3;r.includes(e[o][d].value)&&(e[o][d].wrong=!0),a.includes(e[d][o].value)&&(e[d][o].wrong=!0),s.includes(e[v][h].value)&&(e[v][h].wrong=!0),void 0!==e[o][d].value&&r.push(e[o][d].value),void 0!==e[d][o].value&&a.push(e[d][o].value),void 0!==e[v][h].value&&s.push(e[v][h].value)}}this.setState(Object(i.a)({},this.state,{cells:e}))}},{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keypress",(function(t){return e.handleKeyPress(t)}),!1),document.addEventListener("keydown",(function(t){return e.handleKeyPress(t)}),!1)}},{key:"handleKeyPress",value:function(e){var t=Object(u.a)(this.state.focus,2),n=t[0],o=t[1],r=parseInt(e.key);-1!=n&&-1!=o&&(37==e.keyCode?this.focus(n,o-1):38==e.keyCode?this.focus(n-1,o):39==e.keyCode?this.focus(n,o+1):40==e.keyCode?this.focus(n+1,o):NaN!=r&&r>=1&&r<=9?e.ctrlKey?this.setNote(n,o,r):this.setCell(n,o,r):"Backspace"===e.key&&(e.ctrlKey?this.deleteNotes(n,o):this.setCell(n,o,void 0)))}},{key:"render",value:function(){var e=this,t=Object(u.a)(this.state.focus,2),n=t[0],r=t[1];return o.createElement("div",{className:"sudoku"},o.createElement("table",null,this.state.cells.map((function(t,n){return o.createElement("tr",{className:"sudoku-row"},t.map((function(t,o){return e.renderCell(t,n,o)})))}))),o.createElement("button",{onClick:function(){return e.generateSudoku()}},"Generate new sudoku"),o.createElement(f,{emitClick:function(t){return e.setCell(n,r,t)},emitNote:function(t){return e.setNote(n,r,t)}}))}},{key:"renderCell",value:function(e,t,n){var r,a=this,s=Object(u.a)(this.state.focus,2),i=s[0],l=s[1],c=i==t&&l==n?"focus":"",d=e.wrong?"wrong":"",v=!e.wrong&&e.editable?"set":"",h="cell ".concat(c," ").concat(d," ").concat(v);return r=e.value?e.value:o.createElement("span",{className:"note"},e.notes.join("")),o.createElement("td",{className:h,onClick:function(){return a.focus(t,n)},onKeyPress:function(e){return a.handleKeyPress(e.nativeEvent)}},r)}}]),r}(o.Component);var k=function(){return r.a.createElement(p,null)},m=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sudoku-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/sudoku-pwa","/service-worker.js");m?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):w(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):w(t,e)}))}}()}],[[9,1,2]]]);
//# sourceMappingURL=main.d20c3a49.chunk.js.map