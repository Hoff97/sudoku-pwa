(this["webpackJsonpweb-r"]=this["webpackJsonpweb-r"]||[]).push([[0],{21:function(e,t){e.exports="data:image/png;base64,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"},24:function(e,t,n){e.exports=n(39)},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),s=n(20),u=n.n(s),r=(n(29),n(30),n(13)),i=n(5),c=n(8),l=n(9),d=n(10),f=n(11),v=(n(31),n(32),[1,2,3,4,5,6,7,8,9,void 0]),h=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).buttonPressTimer=void 0,e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return o.createElement("div",null,o.createElement("table",null,o.createElement("tbody",null,o.createElement("tr",null,v.map((function(t){return e.renderButton(t)}))))))}},{key:"handleButtonPress",value:function(e){var t=this;this.buttonPressTimer=setTimeout((function(){e&&t.props.emitNote(e),t.buttonPressTimer=void 0}),500)}},{key:"handleButtonRelease",value:function(e){this.buttonPressTimer&&(clearTimeout(this.buttonPressTimer),this.buttonPressTimer=void 0,this.props.emitClick(e))}},{key:"renderButton",value:function(e){var t=this;return o.createElement("td",{className:"numpad-cell",onTouchStart:function(){return t.handleButtonPress(e)},onTouchEnd:function(){return t.handleButtonRelease(e)},onMouseDown:function(){return t.handleButtonPress(e)},onMouseUp:function(){return t.handleButtonRelease(e)},onMouseLeave:function(){return t.handleButtonRelease(e)},key:"".concat(e)},e)}}]),n}(o.Component);function k(e){for(var t=[],n=0;n<9;n++){for(var o=[],a=0;a<9;a++){var s=e[9*n+a];o.push({value:"."===s?void 0:parseInt(s),wrong:!1,editable:"."===s,notes:[]})}t.push(o)}return t}var m;function p(){var e=localStorage.getItem("sudokus");return e?JSON.parse(e):[]}function g(e){localStorage.setItem("sudokus",JSON.stringify(e))}function y(e){return 0===e.length?0:e[e.length-1].id+1}n.e(3).then(n.bind(null,40)).then((function(e){m=e}));function b(e){var t=e%60,n="";return t<10&&(n+="0"),n+=t,"".concat(Math.floor(e/60),":").concat(n)}function w(e){for(var t=0,n=0;n<9;n++)for(var o=0;o<9;o++){var a=e.cells[n][o];a.editable&&a.value&&(t+=1)}return t}function E(e){for(var t=0,n=0,o=0;o<9;o++)for(var a=0;a<9;a++){var s=e.cells[o][a];s.editable&&(t+=1),s.editable&&s.value&&(n+=1)}return"".concat(n,"/").concat(t)}var C=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,o){var a;Object(c.a)(this,n),(a=t.call(this,e,o)).interval=void 0;for(var s=[],u=0;u<9;u++){for(var r=[],i=0;i<9;i++)r.push({value:void 0,wrong:!1,editable:!0,notes:[]});s.push(r)}return a.state={sudoku:{cells:s,id:-1,time:0,solved:!1},focus:[-1,-1]},a}return Object(l.a)(n,[{key:"generateSudoku",value:function(){var e=this,t=m?k(m.generate_sudoku()):[[]];this.setState({sudoku:{cells:t,id:this.state.sudoku.id,time:0,solved:!1}}),setTimeout((function(){return e.saveSudoku()}),100)}},{key:"focus",value:function(e,t){this.setState(Object(i.a)({},this.state,{focus:[Math.min(Math.max(0,e),8),Math.min(Math.max(0,t),8)]}))}},{key:"setCell",value:function(e,t,n){var o=this.state.sudoku.cells;o[e][t].editable&&(o[e][t].value=n,this.check(o))}},{key:"setNote",value:function(e,t,n){var o=this.state.sudoku.cells;if(o[e][t].editable){var a=o[e][t].notes.findIndex((function(e){return e.value===n}));-1!==a?o[e][t].notes.splice(a,1):(o[e][t].notes.push({value:n,wrong:!1}),o[e][t].notes=o[e][t].notes.sort((function(e,t){return e.value<t.value?-1:0}))),this.check(o),this.saveSudoku()}}},{key:"deleteNotes",value:function(e,t){var n=this.state.sudoku.cells;n[e][t].editable&&(n[e][t].notes=[],this.setState(Object(i.a)({},this.state,{sudoku:Object(i.a)({},this.state.sudoku,{cells:n})})),this.saveSudoku())}},{key:"check",value:function(e){for(var t=this,n=0;n<9;n++)for(var o=0;o<9;o++){e[n][o].wrong=!1;for(var a=0;a<e[n][o].notes.length;a++)e[n][o].notes[a].wrong=!1}for(var s=!1,u=0;u<9;u++){for(var r=[],c=[],l=[],d=0;d<9;d++){var f=3*Math.floor(u/3)+Math.floor(d/3),v=u%3*3+d%3;r.includes(e[u][d].value)&&(e[u][d].wrong=!0,s=!0),c.includes(e[d][u].value)&&(e[d][u].wrong=!0,s=!0),l.includes(e[f][v].value)&&(e[f][v].wrong=!0,s=!0);for(var h=0;h<9;h++)e[u][d].notes[h]&&r.includes(e[u][d].notes[h].value)&&(e[u][d].notes[h].wrong=!0,s=!0),e[d][u].notes[h]&&c.includes(e[d][u].notes[h].value)&&(e[d][u].notes[h].wrong=!0,s=!0),e[f][v].notes[h]&&l.includes(e[f][v].notes[h].value)&&(e[f][v].notes[h].wrong=!0,s=!0);void 0!==e[u][d].value&&r.push(e[u][d].value),void 0!==e[d][u].value&&c.push(e[d][u].value),void 0!==e[f][v].value&&l.push(e[f][v].value)}r=[],c=[],l=[];for(var k=8;k>=0;k--){var m=3*Math.floor(u/3)+Math.floor(k/3),p=u%3*3+k%3;r.includes(e[u][k].value)&&(e[u][k].wrong=!0,s=!0),c.includes(e[k][u].value)&&(e[k][u].wrong=!0,s=!0),l.includes(e[m][p].value)&&(e[m][p].wrong=!0,s=!0);for(var g=0;g<9;g++)e[u][k].notes[g]&&r.includes(e[u][k].notes[g].value)&&(e[u][k].notes[g].wrong=!0,s=!0),e[k][u].notes[g]&&c.includes(e[k][u].notes[g].value)&&(e[k][u].notes[g].wrong=!0,s=!0),e[m][p].notes[g]&&l.includes(e[m][p].notes[g].value)&&(e[m][p].notes[g].wrong=!0,s=!0);void 0!==e[u][k].value&&r.push(e[u][k].value),void 0!==e[k][u].value&&c.push(e[k][u].value),void 0!==e[m][p].value&&l.push(e[m][p].value)}}this.setState(Object(i.a)({},this.state,{sudoku:Object(i.a)({},this.state.sudoku,{cells:e})})),setTimeout((function(){s||w(t.state.sudoku)!==function(e){for(var t=0,n=0;n<9;n++)for(var o=0;o<9;o++){e.cells[n][o].editable&&(t+=1)}return t}(t.state.sudoku)||(t.setState(Object(i.a)({},t.state,{sudoku:Object(i.a)({},t.state.sudoku,{solved:!0})})),t.saveSudoku())})),this.saveSudoku()}},{key:"componentDidMount",value:function(){var e=this,t=function(e){for(var t=p(),n=0;n<t.length;n++)if(console.log(t[n],e),t[n].id==e)return t[n]}(this.props.match.params.sudokuId);t&&this.setState({sudoku:t}),document.addEventListener("keypress",(function(t){return e.handleKeyPress(t)}),!1),document.addEventListener("keydown",(function(t){return e.handleKeyPress(t)}),!1),this.interval=setInterval((function(){return e.increaseTime()}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"increaseTime",value:function(){this.setState(Object(i.a)({},this.state,{sudoku:Object(i.a)({},this.state.sudoku,{time:this.state.sudoku.time+1})})),this.saveSudoku()}},{key:"saveSudoku",value:function(){null!==this.state.sudoku.id&&function(e){for(var t=p(),n=0;n<t.length;n++)if(t[n].id==e.id){t[n]=e;break}g(t)}(this.state.sudoku)}},{key:"handleKeyPress",value:function(e){var t=Object(r.a)(this.state.focus,2),n=t[0],o=t[1],a=parseInt(e.key);-1!==n&&-1!==o&&(37===e.keyCode?this.focus(n,o-1):38===e.keyCode?this.focus(n-1,o):39===e.keyCode?this.focus(n,o+1):40===e.keyCode?this.focus(n+1,o):!isNaN(a)&&a>=1&&a<=9?e.ctrlKey?this.setNote(n,o,a):this.setCell(n,o,a):"Backspace"===e.key&&(e.ctrlKey?this.deleteNotes(n,o):this.setCell(n,o,void 0)))}},{key:"render",value:function(){var e,t=this,n=Object(r.a)(this.state.focus,2),a=n[0],s=n[1];return 0===w(this.state.sudoku)&&(e=o.createElement("button",{onClick:function(){return t.generateSudoku()}},"Generate new sudoku")),o.createElement("div",{className:"sudoku"},o.createElement("table",null,o.createElement("tbody",null,this.state.sudoku.cells.map((function(e,n){return o.createElement("tr",{className:"sudoku-row",key:n},e.map((function(e,o){return t.renderCell(e,n,o)})))})))),e,o.createElement(h,{emitClick:function(e){return t.setCell(a,s,e)},emitNote:function(e){return t.setNote(a,s,e)}}),o.createElement("span",null,b(this.state.sudoku.time)," - ",E(this.state.sudoku)))}},{key:"renderCell",value:function(e,t,n){var a,s=this,u=Object(r.a)(this.state.focus,2),i=u[0],c=u[1],l=i===t&&c===n?"focus":"",d=e.wrong?"wrong":"",f=e.editable?"set":"",v="cell ".concat(l," ").concat(d," ").concat(f);return a=e.value?e.value:o.createElement("span",{className:"note"},e.notes.map((function(e){return o.createElement("span",{className:e.wrong?"wrong":""},e.value)}))),o.createElement("td",{className:v,onClick:function(){return s.focus(t,n)},onKeyPress:function(e){return s.handleKeyPress(e.nativeEvent)},key:"".concat(t,"-").concat(n)},a)}}]),n}(o.Component),B=n(15),S=n(6),A=(n(33),n(21)),N=n.n(A),O=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e,o){var a;return Object(c.a)(this,n),(a=t.call(this,e,o)).state={sudokus:[],choosing:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({sudokus:p()})}},{key:"newSudoku",value:function(e,t){var n=function(e){var t=p(),n={id:y(t),cells:e,time:0,solved:!1};return t.push(n),g(t),n.id}(function(e){return m?k(m.generate_sudoku_by_missing(e)):[[]]}(1==t?20:2==t?40:81));e.push("/sudoku/".concat(n))}},{key:"chooseHardness",value:function(){this.setState({choosing:!0})}},{key:"toSudoku",value:function(e,t){t.push("/sudoku/".concat(e))}},{key:"deleteSudoku",value:function(e){var t=function(e){for(var t=p(),n=0;n<t.length;n++)if(t[n].id==e){t.splice(n,1);break}return g(t),t}(e);this.setState({sudokus:t})}},{key:"copySudoku",value:function(e){var t=function(e){for(var t=p(),n=0;n<t.length;n++)if(t[n].id==e){var o={id:y(t),cells:t[n].cells,time:t[n].time,solved:t[n].solved};t.push(o);break}return g(t),p()}(e);this.setState({sudokus:t})}},{key:"render",value:function(){var e=this,t=function(t){return o.createElement("tr",{className:"sudoku"},o.createElement("td",{className:"sudoku",onClick:function(){return e.chooseHardness()}},"New sudoku"))};return this.state.choosing&&(t=function(t){return o.createElement("tr",{className:"sudoku"},o.createElement("td",{className:"sudoku"},o.createElement("span",{onClick:function(){return e.newSudoku(t,1)},className:"easy"},"Easy"),o.createElement("span",{onClick:function(){return e.newSudoku(t,2)},className:"medium"},"Medium"),o.createElement("span",{onClick:function(){return e.newSudoku(t,3)},className:"hard"},"Hard")))}),o.createElement(S.a,{render:function(n){var a=n.history;return o.createElement("div",{className:"home"},o.createElement("table",null,o.createElement("tbody",null,t(a),e.state.sudokus.map((function(t){return o.createElement("tr",{className:"sudoku",key:t.id},o.createElement("td",{className:"sudoku"+(t.solved?" solved":"")},o.createElement("span",{onClick:function(){return e.toSudoku(t.id,a)}},b(t.time)," - ",E(t)),o.createElement("div",{className:"actions"},o.createElement("span",{className:"copy",onClick:function(){return e.copySudoku(t.id)}},"\ud83d\udccb"),o.createElement("img",{src:N.a,className:"delete",alt:"Delete sudoku",onClick:function(){return e.deleteSudoku(t.id)},width:"50px"}))))})))))}})}}]),n}(o.Component);var j=function(){return a.a.createElement(B.a,{basename:"/sudoku-pwa"},a.a.createElement(S.c,null,a.a.createElement(S.a,{path:"/sudoku/:sudokuId",component:C}),a.a.createElement(S.a,{path:"/"},a.a.createElement(O,null))))},P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function K(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(j,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sudoku-pwa",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/sudoku-pwa","/service-worker.js");P?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var o=n.headers.get("content-type");404===n.status||null!=o&&-1===o.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):K(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):K(t,e)}))}}()}},[[24,1,2]]]);
//# sourceMappingURL=main.bb53fdc6.chunk.js.map